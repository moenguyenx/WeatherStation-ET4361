/*======================================================================================================================
 *                                                  INCLUDE FILES
 * 1) system and project includes
 * 2) needed interfaces from external units
 * 3) internal and external interfaces from this unit
======================================================================================================================*/
#include <Arduino.h>

// Test 2
/*======================================================================================================================
 *                                                  CONSTANTS
======================================================================================================================*/
/*======================================================================================================================
 *                                              DEFINES AND MACROS
======================================================================================================================*/
#define BUFFER_LENGTH 9
/*======================================================================================================================
 *                                                      ENUMS
======================================================================================================================*/
/*======================================================================================================================
 *                                              STRUCTURES AND OTHER TYPEDEFS
======================================================================================================================*/

/*======================================================================================================================
 *                                              GLOBAL VARIABLE DECLARATIONS
======================================================================================================================*/
uint8_t data[BUFFER_LENGTH]; //Buffer for sensor data
/*======================================================================================================================
 *                                                  FUNCTION PROTOTYPES
======================================================================================================================*/

/**
 * @brief Initialize ZPH01 serial communication
 * 
 */
void ZPH01_init(int TX_PIN, int RX_PIN, long BAUD_RATE);

/**
 * @brief Reads PM2.5 concentration from the ZPH01 sensor.
 * 
 * @return float - The PM2.5 concentration in µg/m3, or -1.0 if data is invalid.
 */
float ZPH01_ReadPM25();

/**
 * @brief Parses the duty cycle from the sensor data.
 * 
 * @return float - The parsed duty cycle in percentage
 */
float parseDutyCycle();

/**
 * @brief Calculates PM2.5 concentration based on the duty cycle.
 * 
 * @param dutyCycle - The duty cycle obtained from the sensor data.
 * @return float - The calculated PM2.5 concentration in µg/m3.
 */
float calculatePM25(float dutyCycle);
